# Инструкция по установке и настройке

## Предварительные требования

- Python 3.7 или выше
- pip (менеджер пакетов Python)
- Git (для клонирования репозитория)

## Пошаговая установка

### 1. Клонирование репозитория

```bash
git clone <repository-url>
cd dcm2bids
```

### 2. Создание виртуального окружения

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**Linux/Mac:**
```bash
python3 -m venv venv
source venv/bin/activate
```

### 3. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 4. Тестирование установки

```bash
python test_app.py
```

Если все тесты пройдены успешно, вы увидите сообщение:
```
✅ Все тесты пройдены успешно!
```

## Получение OAuth токена Яндекс.Диска

### 1. Создание приложения в Яндекс.OAuth

1. Перейдите на [Яндекс.OAuth](https://oauth.yandex.ru/)
2. Войдите в свой аккаунт Яндекса
3. Нажмите "Зарегистрировать новое приложение"
4. Заполните форму:
   - **Название**: MRT Pipeline
   - **Платформа**: Веб-сервисы
   - **Callback URL**: `https://oauth.yandex.ru/verification_code`
   - **Права**: 
     - `cloud_api:disk.read` - чтение файлов
     - `cloud_api:disk.write` - запись файлов (опционально)

### 2. Получение токена

1. Скопируйте **Client ID** из настроек приложения
2. Откройте в браузере ссылку:
   ```
   https://oauth.yandex.ru/authorize?response_type=token&client_id=YOUR_CLIENT_ID
   ```
   Замените `YOUR_CLIENT_ID` на ваш Client ID

3. Разрешите доступ приложению
4. Скопируйте токен из адресной строки (после `access_token=`)

## Запуск приложения

```bash
python main.py
```

## Первое использование

1. **Ввод токена:**
   - Вставьте полученный OAuth токен в поле "OAuth токен"
   - Нажмите "Подключиться"

2. **Сохранение токена:**
   - После успешного подключения нажмите "Сохранить токен"
   - Токен будет сохранен в системном хранилище

3. **Навигация:**
   - Двойной клик по папке для входа в неё
   - Используйте кнопки навигации или поле "Путь"

## Устранение неполадок

### Ошибка импорта модулей

```bash
# Убедитесь, что виртуальное окружение активировано
# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate

# Переустановите зависимости
pip install -r requirements.txt
```

### Ошибка подключения к Яндекс.Диску

1. Проверьте правильность OAuth токена
2. Убедитесь, что токен не истек
3. Проверьте права доступа в настройках приложения

### Ошибка сохранения учетных данных

1. Убедитесь, что установлен пакет `keyring`
2. На Windows может потребоваться установка дополнительных компонентов:
   ```bash
   pip install keyring[backends]
   ```

### Проблемы с GUI

1. Убедитесь, что tkinter установлен:
   ```bash
   python -c "import tkinter; print('tkinter доступен')"
   ```

2. На Linux может потребоваться установка tkinter:
   ```bash
   # Ubuntu/Debian
   sudo apt-get install python3-tk
   
   # CentOS/RHEL
   sudo yum install tkinter
   ```

## Безопасность

- OAuth токены шифруются перед сохранением
- Используется системное хранилище ключей
- Учетные данные не сохраняются в репозитории
- Регулярно обновляйте токены для безопасности

## Поддержка

При возникновении проблем:

1. Проверьте логи в консоли
2. Убедитесь, что все зависимости установлены
3. Проверьте правильность OAuth токена
4. Обратитесь к документации Яндекс.Диска API 